# Django + Drupal Docker Setup

## 🚀 Getting Started

### 1. Build and run containers
```bash
cd /Users/ivan/Sites/poc
docker-compose up --build
```

### 2. Access services
- **Django (Apache + mod_wsgi)**: http://localhost:8080
- **Drupal**: http://localhost:8081

### 3. First-time Drupal setup
On first run, Drupal needs to be configured:
1. Open http://localhost:8081
2. Select installation language
3. Configure database:
   - Database type: MySQL
   - Database name: `drupal`
   - Database username: `drupal`
   - Database password: `drupal`
   - Host: `drupal_db`
   - Port: `3306`

## 📁 Structure

```
poc/
├── docker-compose.yml          # Container orchestration
├── docker/
│   ├── Dockerfile.django-apache # Django + Apache + mod_wsgi
│   └── apache-django.conf      # Apache configuration
├── django/                     # Django application
│   ├── static/                 # Static files (CSS, JS, images)
│   └── myproject/wsgi.py       # WSGI entry point
└── drupal/                     # Drupal CMS
```

## ⚙️ How it works

1. **Apache + mod_wsgi** serves Django on port 8080
2. **Static files** are served directly by Apache from `/static/`
3. **HTML pages** are generated by Django via WSGI
4. **Drupal** runs separately on port 8081
5. **Caching** is configured for static files

## 🔧 Development

### Restart Django only
```bash
docker-compose restart apache-django
```

### View logs
```bash
# Django logs
docker-compose logs apache-django

# Drupal logs  
docker-compose logs drupal
```

### Stop services
```bash
docker-compose down
```

## 📝 Next Steps

1. ✅ Set up routing system with `ready_pages.yml`
2. ✅ Implement Django → Drupal delegation logic
3. ✅ Add CDN caching
4. ✅ Prepare for AWS deployment
